<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Les comptes :: Linux expérience</title>
    <link rel="canonical" href="https://jacquelincharbonnel.github.io/LinuxExperienceTwoThousandTwenty-FiveCourseMaterial/LinuxExperience_CourseMaterial/uatl_linux/2025/index.html/linux_baba/2025/user.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
<!-- reference des feuilles de styles supplémentaires -->
<link rel="stylesheet" href="../../_/css/layout.css">
<link rel="stylesheet" href="../../_/css/content.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://jacquelincharbonnel.github.io/LinuxExperienceTwoThousandTwenty-FiveCourseMaterial/LinuxExperience_CourseMaterial/uatl_linux/2025/index.html">Linux expérience</a>
  <!-- suppression du burger du bandeau
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
-->      
    </div>
<!-- suppression des boutons du bandeau
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="linux_baba" data-version="2025">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Linux expliqué</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="priseenmain.html">Prise en main</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fs.html">Système de fichiers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="remote.html">Connexions distantes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="admfs.html">L&#8217;espace de stockage</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appli.html">Gestion des applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="redirect.html">Redirection et pipes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="su.html">Gestion du système</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="user.html">Les comptes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="services.html">Services</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="nfs.html">NFS</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="sshd.html">serveur <code>ssh</code></a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Linux expliqué</span>
    <span class="version">2025</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../uatl_linux/2025/index.html">Index</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../uatl_linux/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../linux_context/2025/index.html">Linux contexte</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../linux_context/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="index.html">Linux expliqué</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2025</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../uatl_linux/2025/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Linux expliqué</a></li>
    <li><a href="user.html">Les comptes</a></li>
  </ul>
</nav>
<!-- supression de "edit this page"
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/linux_baba/./modules/ROOT/pages/user.adoc">Edit this Page</a></div>
-->
</div>
  <!-- ajout de la date de modification -->
     <div class="lastmodify"> modifié le <span id="lastmodify"/> </div>
  <!-- fin ajout -->
  <div class="content">
<aside class="toc sidebar" data-title="Plan" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Les comptes</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Un compte (<em>account</em>) est une identité.
Chaque utilisateur d&#8217;un système Unix doit disposer d&#8217;un compte pour pouvoir ouvrir une session de travail.
Mais il existe aussi des comptes pour les services.
Par exemple, un serveur web tourne sous une identité qui lui est propre
(typiquement <code>www</code>, <code>www-data</code> ou <code>apache</code>, suivant les distributions).
De même, un serveur de messagerie tourne typiquement avec l&#8217;identité <code>mail</code>.</p>
</div>
<div class="paragraph">
<p>Par convention, les comptes de services possèdent des UID petits
(inférieur à 1000, et même souvent inférieur à 100),
alors que les comptes utilisateurs possèdent de grands UID.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_les_attributs_dun_compte"><a class="anchor" href="#_les_attributs_dun_compte"></a>1. Les attributs d&#8217;un compte</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Chaque compte possède un identifiant (<em>uid</em>), un groupe principal
et potentiellement des groupes secondaires.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ id root $USER
uid=0(root) gid=0(root) groupes=0(root)
uid=1000(jaclin) gid=1000(jaclin) groupes=1000(jaclin),10(wheel)</code></pre>
</div>
</div>
<div class="paragraph">
<p>La commande ci-dessus indique que le compte <code>root</code> possède l&#8217;uid 0,
que son groupe principal est <code>root</code>,
et qu&#8217;il n&#8217;a pas de groupe secondaire.
Le compte <code>jaclin</code> possède quant à lui l&#8217;uid 1000,
son groupe principal est <code>jaclin</code>,
et il a pour groupe secondaire <code>wheel</code>.</p>
</div>
<div class="paragraph">
<p>Chaque compte possède aussi un homedir et un shell.
La commande <code>getent passwd</code> permet de récupérer les attributs de compte :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ getent passwd root $USER
root:x:0:0:Super User:/root:/bin/bash
jaclin:x:1000:1000:Jacquelin Charbonnel:/home/jaclin:/bin/bash</code></pre>
</div>
</div>
<div class="paragraph">
<p>Chaque ligne renvoyée correspond à un compte,
dont les champs spécifient ses attributs :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>son nom</p>
</li>
<li>
<p>(obsolète) historiquement, ce champ contenait son mot passe chiffré</p>
</li>
<li>
<p>son uid</p>
</li>
<li>
<p>son gid</p>
</li>
<li>
<p>un commentaire libre</p>
</li>
<li>
<p>son homedir</p>
</li>
<li>
<p>son shell</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ces informations sont issues du fichier <code>/etc/passwd</code>.</p>
</div>
<div class="paragraph">
<p>Reste le mot de passe, que l&#8217;on récupère chiffré avec la commande <code>getent shadow</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ sudo getent shadow root $USER
root:$y$j9T$.Dm3oT31$.jN6l5tD:20025:0:99999:7:::
jaclin:$y$jy.Dm3osH1$.jfwl5tD:20025:0:99999:7:::</pre>
</div>
</div>
<div class="paragraph">
<p>Chaque ligne renvoyée correspond à un compte,
dont les champs spécifient des attributs privés :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>le nom du compte</p>
</li>
<li>
<p>son mot de passe chiffré</p>
</li>
<li>
<p>divers paramètres, comme
la date du dernier changement de mot de passe,
le nombre de jours minimum et maximum de validité du mot de passe,
la date d&#8217;expiration du compte, etc.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ces informations sont issues du fichier <code>/etc/shadow</code>.</p>
</div>
<div class="paragraph">
<p>Les mots de passe se modifient avec la commande <code>passwd</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_création_dun_compte"><a class="anchor" href="#_création_dun_compte"></a>2. Création d&#8217;un compte</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La création d&#8217;un compte consiste à :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>créer un homedir (avec le bon propriétaire, et des permissions conformes à la politique de sécurité)</p>
</li>
<li>
<p>ajouter une ligne dans <code>/etc/passwd</code></p>
</li>
<li>
<p>recopier un profil standard dans le homedir
(le profile standard est l&#8217;ensemble des fichiers de configuration initiaux
déposés dans le homedir de l&#8217;utilisateur)</p>
</li>
<li>
<p>si le compte est un compte utilisateur, lui affecter un mot de passe (avec la commande <code>passwd</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Historiquement, ces opérations étaient réalisées manuellement.
Aujourd&#8217;hui, on crée, modifie et supprime un compte avec des commandes évoluées,
comme <code>useradd</code>, <code>usermod</code> et <code>userdel</code>.</p>
</div>
<details class="exo">
<summary class="title">Exercice 1<a href="" title="shadow">&nbsp;</a></summary>
<div class="content">
<div class="sidebarblock exercice">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Pourquoi l&#8217;idée initiale de stocker les mots de passe dans 
le fichier <code>/etc/passwd</code> n&#8217;était pas une bonne idée ?</p>
</li>
<li>
<p>En quoi les déplacer dans <code>/etc/shadow</code> est préférable ?</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</details>
<details class="exo">
<summary class="title">Exercice 2<a href="" title="raz">&nbsp;</a></summary>
<div class="content">
<div class="sidebarblock exercice">
<div class="content">
<div class="ulist">
<ul>
<li>
<p>Supprimer <em>à la main</em> le mot de passe de <code>root</code>,
et vérifier qu&#8217;on peut effectivement devenir superuser sans mot de passe
(indication : éditer le fichier <code>/etc/shadow</code>).</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Manip à effectuer à jeun, une erreur pouvant être fatale.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>Remettre un mot de passe à <code>root</code>, et tester que cela fonctionne.</p>
</li>
<li>
<p>Décrire un procédé permettant de retrouver un accès superuser sur un système dont on a oublié le mot de passe <code>root</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</details>
<details class="exo">
<summary class="title">Exercice 3<a href="" title="user">&nbsp;</a></summary>
<div class="content">
<div class="sidebarblock exercice">
<div class="content">
<div class="paragraph parttitle">
<p>Question 3.1</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Créer <em>à la main</em> un compte <code>test</code> ayant <code>/home/test</code> comme homedir, 
<code>users</code> comme groupe principal, et <code>/bin/sh</code> comme shell
(indication : éditer le fichier <code>/etc/passwd</code> et ajouter une ligne). </p>
</li>
<li>
<p>Lui affecter un mot de passe. </p>
</li>
<li>
<p>Tester que le compte est opérationnel.</p>
</li>
</ul>
</div>
<div class="paragraph parttitle">
<p>Question 3.2</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Créer, avec la commande <code>useradd</code> (ou équivalent), 
un compte <code>test2</code> ayant <code>/home/test2</code> comme homedir, 
<code>users</code> comme groupe principal, et <code>/bin/ls</code> comme shell. </p>
</li>
<li>
<p>Lui affecter un mot de passe. </p>
</li>
<li>
<p>Tester que le compte est opérationnel.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</details>
<div class="dlist">
<dl>
<dt class="hdlist1">Résumé</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>les comptes sont définis dans le fichier <code>/etc/passwd</code></p>
</li>
<li>
<p>la commande <code>passwd</code> permet de changer les mots de passe</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
    <a href="https://jacquelincharbonnel.github.io/">Jacquelin Charbonnel</a>
    <!-- &nbsp; &mdash; &nbsp; -->
    &nbsp;
    &copy;Creative Commons BY-NC-SA 4.0
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
