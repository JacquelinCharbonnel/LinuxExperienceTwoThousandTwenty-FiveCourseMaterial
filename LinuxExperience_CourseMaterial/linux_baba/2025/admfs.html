<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>L&#8217;espace de stockage :: Linux expérience</title>
    <link rel="canonical" href="https://jacquelincharbonnel.github.io/LinuxExperienceTwoThousandTwenty-FiveCourseMaterial/LinuxExperience_CourseMaterial/uatl_linux/2025/index.html/linux_baba/2025/admfs.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
<!-- reference des feuilles de styles supplémentaires -->
<link rel="stylesheet" href="../../_/css/layout.css">
<link rel="stylesheet" href="../../_/css/content.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://jacquelincharbonnel.github.io/LinuxExperienceTwoThousandTwenty-FiveCourseMaterial/LinuxExperience_CourseMaterial/uatl_linux/2025/index.html">Linux expérience</a>
  <!-- suppression du burger du bandeau
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
-->      
    </div>
<!-- suppression des boutons du bandeau
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="linux_baba" data-version="2025">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="index.html">Linux expliqué</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="priseenmain.html">Prise en main</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fs.html">Système de fichiers</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="remote.html">Connexions distantes</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="admfs.html">L&#8217;espace de stockage</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="appli.html">Gestion des applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="redirect.html">Redirection et pipes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Linux expliqué</span>
    <span class="version">2025</span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../uatl_linux/2025/index.html">Index</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../uatl_linux/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../linux_context/2025/index.html">Linux contexte</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../linux_context/2025/index.html">2025</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="index.html">Linux expliqué</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2025</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../uatl_linux/2025/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Linux expliqué</a></li>
    <li><a href="admfs.html">L&#8217;espace de stockage</a></li>
  </ul>
</nav>
<!-- supression de "edit this page"
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/linux_baba/./modules/ROOT/pages/admfs.adoc">Edit this Page</a></div>
-->
</div>
  <!-- ajout de la date de modification -->
  <div class="lastmodify"> modifié le <span id="lastmodify"/> </div>
  <!-- fin ajout -->
  <div class="content">
<aside class="toc sidebar" data-title="Plan" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">L&#8217;espace de stockage</h1>
<div id="preamble">
<div class="sectionbody">
<div class="quoteblock abstract">
<blockquote>
On voit ici comment assembler les partitions pour obtenir l&#8217;espace disque.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_partition"><a class="anchor" href="#_partition"></a>1. Partition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une partition est une unité de stockage,
qui possède ses propres caractéristiques :
un type, une taille (donc un taux de remplissage), etc.
Physiquement, elle repose sur un support (disque, clé, DVD, etc.) ayant lui aussi ses propres caractéristiques :
temps d’accès aux données, taux de transfert, etc.</p>
</div>
<div class="paragraph">
<p>Pour qu&#8217;une partition soit utilisable par Unix, elle doit contenir un système de fichiers (<em>filesystem</em>).
Celui-ci est créé lors du formatage de la partition.</p>
</div>
<div class="sect2">
<h3 id="_assembler_les_partitions"><a class="anchor" href="#_assembler_les_partitions"></a>1.1. Assembler les partitions</h3>
<div class="paragraph">
<p>Soit 2 partitions avec sur chacune d&#8217;elles un système de fichiers.
La première :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">/
├── ...
├── ...
└── var</pre>
</div>
</div>
<div class="paragraph">
<p>dans lequel le répertoire <code>/var</code> est vide,
et la seconde :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">/
├── lib
├── log
└── tmp</pre>
</div>
</div>
<div class="paragraph">
<p>L&#8217;opération de raccordement s&#8217;appelle un <em>montage</em>.
Quand la seconde partition est montée dans le répertoire <code>/var</code> de la première, cela donne :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">/
├── ...
├── ...
└── var
    ├── lib
    ├── log
    └── tmp</pre>
</div>
</div>
<div class="paragraph">
<p>On dit alors que le répertoire <code>var</code> est un <em>point de montage</em>.
La commande <code>df</code> permet de voir les partitions constituant l&#8217;espace de stockage,
leurs volumes et taux de remplissage, ainsi que les points de montage.</p>
</div>
<div class="paragraph">
<p>Pour des raisons historiques, <code>/usr</code> a longtemps été une partition à part.
Pour des raisons techniques, <code>/boot</code> l&#8217;est souvent aujourd&#8217;hui encore.
Et il peut être judicieux que <code>/home</code>, <code>/var</code> et <code>/tmp</code> le soient également.</p>
</div>
</div>
<div class="sect2">
<h3 id="_type_de_partition"><a class="anchor" href="#_type_de_partition"></a>1.2. Type de partition</h3>
<div class="paragraph">
<p>Il existe plusieurs types de partition,
chacun ayant ses spécificités,
comme par exemple le format des noms de fichiers :
8.3 (format MS/DOS), noms de fichiers longs, noms de fichiers contenant des caractères nationaux (éèêàù&#8230;&#8203;), etc.</p>
</div>
<div class="paragraph">
<p>Linux utilise couramment le type <code>ext4</code>, correspondant à des partitions sur disques durs,
ainsi que <code>tmpfs</code>, un type de partition en RAM.
Il sait aussi exploiter <code>fat32</code> (MS/DOS et Windows avant Windows NT), <code>exfat</code> (clés USB) et <code>ntfs</code> (Windows),
ainsi que
<code>ISO9660</code> (CD) et <code>UDF</code> (supports optiques réinscriptibles).</p>
</div>
</div>
<div class="sect2">
<h3 id="_initialisation"><a class="anchor" href="#_initialisation"></a>1.3. Initialisation</h3>
<div class="paragraph">
<p>Les opérations d&#8217;initialisation d&#8217;un disque avant de pouvoir l&#8217;intégrer à un système sont :</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>le partitionnement : <code>fdisk</code>, <code>cfdisk</code>, <code>parted</code></p>
</li>
<li>
<p>le formatage de chaque partition, ce qui crée un filesystem sur chacune d&#8217;elles : <code>mkfs</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>La cohérence d&#8217;un filesystem peut être vérifiée avec <code>fsck</code>,
qui peut aussi corriger quelques problèmes de corruption si besoin.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_périphériques"><a class="anchor" href="#_périphériques"></a>2. Périphériques</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La commande <code>lsblk</code> liste les devices actuellement connectés à la machine,
ainsi que leurs partitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ lsblk
NAME                 MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS
zram0                252:0    0     8G  0 disk  [SWAP]
nvme0n1            259:0    0 238,5G  0 disk
├─nvme0n1p1        259:1    0   600M  0 part  /boot/efi
├─nvme0n1p2        259:2    0     1G  0 part  /boot
└─nvme0n1p3        259:3    0 236,9G  0 part
  ├─almalinux-root 253:0    0    70G  0 lvm   /
  ├─almalinux-swap 253:1    0   7,8G  0 lvm   [SWAP]
  └─almalinux-home 253:2    0 159,1G  0 lvm   /home</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_montage"><a class="anchor" href="#_montage"></a>3. Montage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pour accéder aux données situées sur une partition, il faut la <em>monter</em> dans un répertoire.
Cela se réalise avec la commande <code>mount</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ sudo mount /dev/nvme0n1p4 /mnt</code></pre>
</div>
</div>
<div class="paragraph">
<p>On visualise la composition de l&#8217;espace disque avec la commande <code>df</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ df -h
Sys. de fichiers           Taille Utilisé Dispo Uti% Monté sur
efivarfs                     256K     73K  179K  29% /sys/firmware/efi/efivars
/dev/nvme0n1p1                50G    3,5G   47G   5% /
/dev/nvme0n1p4                 1T    128K    1T   0% /mnt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Le montage est une opération globale à la machine, impactant tous les utilisateurs
(dont nécessitant des privilèges administrateur).
Un montage est effectif jusqu&#8217;au shutdown de l&#8217;ordinateur.
Pour qu&#8217;il soit persistant, il faut le déclarer dans le fichier <code>/etc/fstab</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Déclarer la composition de l&#8217;espace de stockage dans <code>/etc/fstab</code> était la procédure historique sur tout Unix, avant l&#8217;avènement de <code>systemd</code>.
Aujourd&#8217;hui, <code>systemd</code> prend en charge les montages et propose une procédure alternative.
</td>
</tr>
</table>
</div>
<h3 id="_exemple" class="discrete">Exemple</h3>
<div class="paragraph">
<p>Voici par exemple les périphériques d&#8217;un ordinateur :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ lsblk
NAME                 MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS
zram0                252:0    0     8G  0 disk  [SWAP]
nvme0n1            259:0    0 238,5G  0 disk
├─nvme0n1p1        259:1    0   600M  0 part  /boot/efi
├─nvme0n1p2        259:2    0     1G  0 part  /boot
└─nvme0n1p3        259:3    0 236,9G  0 part
  ├─almalinux-root 253:0    0    70G  0 lvm   /
  ├─almalinux-swap 253:1    0   7,8G  0 lvm   [SWAP]
  └─almalinux-home 253:2    0 159,1G  0 lvm   /home</code></pre>
</div>
</div>
<div class="paragraph">
<p>et son espace de stockage :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ df -h
Sys. de fichiers           Taille Utilisé Dispo Uti% Monté sur
efivarfs                     256K     73K  179K  29% /sys/firmware/efi/efivars
/dev/mapper/almalinux-root    70G    3,5G   67G   5% /
/dev/nvme0n1p2              1014M    469M  546M  47% /boot
/dev/mapper/almalinux-home   160G    140G   20G  88% /home
/dev/nvme0n1p1               599M    7,1M  592M   2% /boot/efi</code></pre>
</div>
</div>
<div class="paragraph">
<p>On branche un disque externe sur cette machine.
On voit alors apparaitre un nouveau periphérique <code>sda</code> avec une partition <code>sda1</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ lsblk
NAME                 MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS
zram0                252:0    0     8G  0 disk  [SWAP]
sda                  8:0    0   1,8T  0 disk
└─sda1               8:1    0   7,4G  0 part
nvme0n1            259:0    0 238,5G  0 disk
├─nvme0n1p1        259:1    0   600M  0 part  /boot/efi
├─nvme0n1p2        259:2    0     1G  0 part  /boot
└─nvme0n1p3        259:3    0 236,9G  0 part
  ├─almalinux-root 253:0    0    70G  0 lvm   /
  ├─almalinux-swap 253:1    0   7,8G  0 lvm   [SWAP]
  └─almalinux-home 253:2    0 159,1G  0 lvm   /home</code></pre>
</div>
</div>
<div class="paragraph">
<p>Mais cette partition n&#8217;apparait pas dans l&#8217;espace de stockage :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ df -h
Sys. de fichiers           Taille Utilisé Dispo Uti% Monté sur
efivarfs                     256K     73K  179K  29% /sys/firmware/efi/efivars
/dev/mapper/almalinux-root    70G    3,5G   67G   5% /
/dev/nvme0n1p2              1014M    469M  546M  47% /boot
/dev/mapper/almalinux-home   160G    140G   20G  88% /home
/dev/nvme0n1p1               599M    7,1M  592M   2% /boot/efi</code></pre>
</div>
</div>
<div class="paragraph">
<p>On monte la partion <code>sda1</code> dans le répertoire <code>/mnt</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ mount /dev/sda1 /mnt</code></pre>
</div>
</div>
<div class="paragraph">
<p>ce qui la rend opérationnelle :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ df -h
Sys. de fichiers           Taille Utilisé Dispo Uti% Monté sur
efivarfs                     256K     73K  179K  29% /sys/firmware/efi/efivars
/dev/mapper/almalinux-root    70G    3,5G   67G   5% /
/dev/nvme0n1p2              1014M    469M  546M  47% /boot
/dev/mapper/almalinux-home   160G    140G   20G  88% /home
/dev/nvme0n1p1               599M    7,1M  592M   2% /boot/efi
/dev/sda1                    1,8T    153G  1,6T   9% /mnt</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nfs"><a class="anchor" href="#_nfs"></a>4. NFS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NFS (Network File System) permet de créer un espace de stockage distribué sur le réseau.
Le serveur NFS exporte des répertoires, qui sont susceptibles d&#8217;être montés par un ou plusieurs ordinateurs clients.
Les répertoires exportés sont listés dans <code>/etc/exports</code>.
Le client monte les répertoires exportés avec la commande <code>mount</code>.</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
    <a href="https://jacquelincharbonnel.github.io/home/index.html">Jacquelin Charbonnel</a>
    <!-- &nbsp; &mdash; &nbsp; -->
    &nbsp; &nbsp;
    &copy; Creative Commons BY-NC-SA 4.0
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
